## 基本概念
MySQL官方对索引的定义为：索引(Index)是帮助MySQL高效获取数据的数据结构。我们可以简单理解为：快速查找排好序的一种数据结构。Mysql索引主要有两种结构：B+Tree索引和Hash索引。我们平常所说的索引，如果没有特别指明，一般都是指B树结构的索引(B+Tree索引)。
## 索引的好处
* 索引可以避免全表扫描。多数查询可以仅扫描少量索引页及数据页，而不是遍历所有数据页。
* 对于非聚集索引，有些查询甚至可以不访问数据页。
* 聚集索引可以避免数据插入操作集中于表的最后一个数据页。
* 一些情况下，索引还可用于避免排序操作。
## 索引原理
给一张空表创建索引时，数据库系统会分配一个索引页，该索引页在往表里面插入数据前是空的。此页此时既是根结点，也是叶结点。每当你往表中插入一行数据，数据库系统即向此根结点中插入一行索引记录。当根结点满时，数据库系统大抵按以下步骤进行分裂：

    创建两个儿子结点
    将原根结点中的数据近似地拆成两半，分别写入新的两个儿子结点
    根结点中加上指向两个儿子结点的指针
## 索引分类
* 聚集索引：对于聚集索引，叶子结点即存储了真实的数据行，不再有另外单独的数据页。在聚集索引中，叶结点也即数据结点，所有数据行的存储顺序与索引的存储顺序一致
* 非聚集索引：对于非聚集索引，叶结点包含索引字段值及指向数据页数据行的逻辑指针，该层紧邻数据页，其行数量与数据表行数据量一致。
## 索引失效
* 查询条件中有or的，索引失效。 如果让索引生效，只能将or条件中的每个列都加上索引
    
      explain select * from order where id =66;查询出来的key:primary 为主键索引，
      explain select * from order where id =66 or userid =66;查出来key值为null，索引失效。
* like查询是以%开头的，索引失效

      explain select * from order where user_name like '%德';查出来key值为null，索引失效
* 如果mysql估计使用全表扫描要比使用索引快，则不使用索引。例如，使用<>、not in 、not exist，对于这三种情况大多数情况下认为结果集很大，MySQL就有可能不使用索引。

      查看索引的使用情况：show status like ‘Handler_read%'；
      handler_read_key:这个值表示使用索引查询到的次数；
      handler_read_rnd_next:这个值越大，说明查询越低效；
 ## 索引设计的原则
* 表的某个字段值得离散度越高，该字段越适合选作索引的关键字。主键字段以及唯一性约束字段适合选作索引的关键字，原因就是这些字段的值非常离散。
* 占用存储空间少的字段更适合选作索引的关键字。例如，与字符串相比，整数字段占用的存储空间较少，因此，较为适合选作索引关键字。
* 存储空间固定的字段更适合选作索引的关键字。与text类型的字段相比，char类型的字段较为适合选作索引关键字。
* Where 子句中经常使用的字段应该创建索引，分组字段或者排序字段应该创建索引，两个表的连接字段应该创建索引。
* 更新频繁的字段不适合创建索引，不会出现在where子句中的字段不应该创建索引。
* 最左前缀原则。
* 尽量使用前缀索引。
