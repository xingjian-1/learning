
#### 组合模式
组合模式更形象的说就是一棵树，描述的部分-整体的关系，有两种不同的实现，分别为透明模式和安全模式。
###### 透明模式是把组合使用的方法放到抽象类中，不管叶子对象还是树枝对象都有相同的结构，这样做的好处就是叶子节点和树枝节点对于外界没有区别，它们具备完全一致的行为接口。

                        /**
                         * 
                         * @Description 组合模式-透明模式-抽象类，把共有的操作放在这里
                         * @Authur xj
                         * @date 2021年2月18日
                         */
                        public abstract class CompositeAbstract {
                          protected String name;

                          public CompositeAbstract(String name) {
                            this.name = name;
                          }

                          // 增加一个叶子构件或树枝构件
                          public abstract void add(CompositeAbstract component);

                          // 删除一个叶子构件或树枝构件
                          public abstract void remove(CompositeAbstract component);

                          // 获取分支下的所有叶子构件和树枝构件
                          public abstract void display(int depth);

                        }
                        /**
                         * 
                         * @Description 组合模式-透明模式-树枝节点
                         * @Authur xj
                         * @date 2021年2月18日
                         */
                        public class Composite extends CompositeAbstract {
                          public Composite(String name) {
                            super(name);
                          }

                          // 构建容器
                          private ArrayList<CompositeAbstract> componentArrayList = new ArrayList<CompositeAbstract>();

                          @Override
                          public void add(CompositeAbstract component) {
                            this.componentArrayList.add(component);
                          }

                          @Override
                          public void remove(CompositeAbstract component) {
                            this.componentArrayList.remove(component);
                          }

                          @Override
                          public void display(int depth) {
                            // 输出树形结构
                            for (int i = 0; i < depth; i++) {
                              System.out.print('-');
                            }
                            System.out.println(name);

                            // 下级遍历
                            for (CompositeAbstract component : componentArrayList) {
                              component.display(depth + 1);
                            }
                          }

                        }
                        /**
                         * 
                         * @Description 组合模式-透明模式-树叶子节点
                         * @Authur xj
                         * @date 2021年2月18日
                         */
                        public class Leaf extends CompositeAbstract {

                          public Leaf(String name) {
                            super(name);
                          }

                          @Override
                          public void add(CompositeAbstract component) {
                            // 空实现，抛出“不支持请求”异常
                            throw new UnsupportedOperationException();
                          }

                          @Override
                          public void remove(CompositeAbstract component) {
                            // 空实现，抛出“不支持请求”异常
                            throw new UnsupportedOperationException();
                          }

                          @Override
                          public void display(int depth) {
                            // 输出树形结构的叶子节点
                            for (int i = 0; i < depth; i++) {
                              System.out.print('-');
                            }
                            System.out.println(name);
                          }

                          public static void main(String[] args) {
                            // 创建根节点及其子节点
                            Composite root = new Composite("root");
                            root.add(new Leaf("Leaf A"));
                            root.add(new Leaf("Leaf B"));

                            // 创建第二层节点及其子节点
                            Composite branch = new Composite("Composite X");
                            branch.add(new Leaf("Leaf XA"));
                            branch.add(new Leaf("Leaf XB"));
                            root.add(branch);

                            // 创建第三层节点及其子节点
                            Composite branch2 = new Composite("Composite XY");
                            branch2.add(new Leaf("Leaf XYA"));
                            branch2.add(new Leaf("Leaf XYB"));
                            branch.add(branch2);

                            // 创建第二层节点
                            root.add(new Leaf("Leaf C"));

                            // 创建第二层节点并删除
                            Leaf leaf = new Leaf("Leaf D");
                            root.add(leaf);
                            root.remove(leaf);

                            // 打印
                            root.display(1);
                          }
                        }

###### 安全模式是把树枝节点和树叶节点彻底分开，树枝节点单独拥有用来组合的方法，这种方法比较安全。但由于不够透明，所以树叶节点和树枝节点将不具有相同的接口，客户端的调用需要做相应的判断，带来了不便

                  public abstract class CompositeAbstract {
                    protected String name;

                    public CompositeAbstract(String name) {
                      this.name = name;
                    }

                    // 获取分支下的所有叶子构件和树枝构件
                    public abstract void display(int depth);

                  }
                  public class Composite extends CompositeAbstract {
                    public Composite(String name) {
                      super(name);
                    }

                    // 构建容器
                    private ArrayList<CompositeAbstract> componentArrayList = new ArrayList<CompositeAbstract>();


                    public void add(CompositeAbstract component) {
                      this.componentArrayList.add(component);
                    }


                    public void remove(CompositeAbstract component) {
                      this.componentArrayList.remove(component);
                    }

                    @Override
                    public void display(int depth) {
                      // 输出树形结构
                      for (int i = 0; i < depth; i++) {
                        System.out.print('-');
                      }
                      System.out.println(name);

                      // 下级遍历
                      for (CompositeAbstract component : componentArrayList) {
                        component.display(depth + 1);
                      }
                    }

                  }
                  public class Leaf extends CompositeAbstract {

                    public Leaf(String name) {
                      super(name);
                    }


                    public void add(CompositeAbstract component) {
                      // 空实现，抛出“不支持请求”异常
                      throw new UnsupportedOperationException();
                    }


                    public void remove(CompositeAbstract component) {
                      // 空实现，抛出“不支持请求”异常
                      throw new UnsupportedOperationException();
                    }

                    @Override
                    public void display(int depth) {
                      // 输出树形结构的叶子节点
                      for (int i = 0; i < depth; i++) {
                        System.out.print('-');
                      }
                      System.out.println(name);
                    }

                    public static void main(String[] args) {
                      // 创建根节点及其子节点
                      Composite root = new Composite("root");
                      root.add(new Leaf("Leaf A"));
                      root.add(new Leaf("Leaf B"));

                      // 创建第二层节点及其子节点
                      Composite branch = new Composite("Composite X");
                      branch.add(new Leaf("Leaf XA"));
                      branch.add(new Leaf("Leaf XB"));
                      root.add(branch);

                      // 创建第三层节点及其子节点
                      Composite branch2 = new Composite("Composite XY");
                      branch2.add(new Leaf("Leaf XYA"));
                      branch2.add(new Leaf("Leaf XYB"));
                      branch.add(branch2);

                      // 创建第二层节点
                      root.add(new Leaf("Leaf C"));

                      // 创建第二层节点并删除
                      Leaf leaf = new Leaf("Leaf D");
                      root.add(leaf);
                      root.remove(leaf);

                      // 打印
                      root.display(1);
                    }
                  }
